{% extends 'base.html.twig' %}

{% block title %}Vitrine #{{ vitrine.id }}{% endblock %}

{% block body %}
    <h1>Vitrine</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ vitrine.id }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ vitrine.description }}</td>
            </tr>
            <tr>
                <th>Publiée</th>
                <td>{{ vitrine.publiee ? 'Oui' : 'Non' }}</td>
            </tr>
        </tbody>
    </table>

    <h2 class="mt-4">Montres de cette vitrine</h2>

    {% if vitrine.montres is empty %}
        <p>Aucune montre dans cette vitrine.</p>
    {% else %}
        <ul class="list-group mb-3">
            {% for m in vitrine.montres %}
                <li class="mb-2">
                    <a href="{{ path('app_vitrine_montre_show', {
                        vitrine_id: vitrine.id,
                        montre_id:  m.id
                    }) }}">
                        {% if m.imageFilename %}
                            <img
                                src="{{ asset('uploads/montres/' ~ m.imageFilename) }}"
                                alt="Photo de {{ m.marque }} {{ m.reference }}"
                                style="max-width: 80px; max-height: 80px;"
                                class="me-2 rounded border"
                            >
                        {% endif %}
                        #{{ m.id }} — {{ m.marque }} {{ m.reference }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    <div class="mt-3 d-flex flex-wrap gap-2">
        <a class="btn btn-outline-secondary"
           href="{{ path('app_member_show', { id: vitrine.createur.id }) }}">
            ← Retour au membre
        </a>

        <a class="btn btn-primary"
           href="{{ path('app_vitrine_edit', {'id': vitrine.id}) }}">
            Modifier cette vitrine
        </a>

        {{ include('vitrine/_delete_form.html.twig') }}
    </div>
{% endblock %}

